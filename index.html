<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Google Form</title>
</head>
<body>
    <h1>Exámen Balcarce - Primer cuatrimestre - 2024</h1>
    <iframe id="google-form" 
            src="https://docs.google.com/forms/d/e/1FAIpQLSe4rZxD8xBd-LFJpE7s77cxMY0QES50zq0RVBHujgP3qpJwBQ/viewform?embedded=true" 
            width="100%" 
            height="500"
            frameborder="0" 
            marginheight="0" 
            marginwidth="0">
    </iframe>

    <script>
        // Detectar cambio de pestaña
        const urlMeet = "https://meet.google.com/hpv-hcna-yfi?authuser=0";
        const urlLocal = "file:///C:/Users/Usuario/Documents/Cyn-personal/ExamenBalcarce/index.html";

        document.addEventListener("visibilitychange", () => {
            if (document.visibilityState === "hidden") {
                // Al ocultarse, verifica si estamos en la página local y guarda la intención
                if (window.location.href === urlLocal) {
                    localStorage.setItem("ultimaVentana", "local");
                }
            } else if (document.visibilityState === "visible") {
                const ultimaVentana = localStorage.getItem("ultimaVentana");

                // Detectar si el usuario regresa desde el Meet
                if (ultimaVentana === "meet") {
                    console.log("Regresaste desde el Meet. No se recarga la página.");
                    localStorage.setItem("ultimaVentana", "local"); // Restablecer estado
                } else {
                    console.log("Regresaste de otra ventana. Se recarga la página.");
                    location.reload();
                }
            }
        });

        // Escuchar el evento `beforeunload` para saber si el usuario está navegando al Meet
        window.addEventListener("beforeunload", () => {
            if (document.referrer === urlMeet) {
                localStorage.setItem("ultimaVentana", "meet");
            }
        });


    </script>
</body>
</html>
